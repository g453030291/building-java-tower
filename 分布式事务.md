分布式事务有多种解决方案：

①：最大努力通知（最常用）

商户A调用下单接口，去第三方B（服务提供方）处进行下单操作，下单失败则立即失败，下单成功则此时更改A的订单状态为处理中。  

B为该订单进行充值，一旦充值成功或者失败，即订单有准确的状态，B调用A提供的通知（即通常讲的回调）接口，讲订单的确切状态返回。

 如果接口超时，B会再次尝试，直到达到最大重试次数的阈值。 

 这时，A需要定时轮询B提供的订单查询接口，根据返回的状态决定是否更新本地的订单状态，如果是成功或者失败则同步本地状态，否则 其他状态，比如未知或者处理中则继续轮询。

这里尽可能的保证两边的状态一致，在下单开始后的一段时间，会出现两边状态不一致，当一段时间之后会最终达到状态的同步。

这里还是会有状态不一致的，那么就保持状态为未知或者处理中，需要依靠其他的手段来保证一致性，比如对账等方式。 

②：依靠消息队列实现

③：TCC